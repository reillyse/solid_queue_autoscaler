# frozen_string_literal: true

# Migration for SolidQueueAutoscaler cooldown state table.
#
# For multi-database setups (SolidQueue in separate database):
#   This migration should be placed in db/queue_migrate/ (or your queue DB's migration path)
#   Run with: rails db:migrate:queue
#
# For single-database setups:
#   Place in db/migrate/ and run: rails db:migrate
#
class CreateSolidQueueAutoscalerState < ActiveRecord::Migration<%= migration_version %>
  def change
    create_table :solid_queue_autoscaler_state do |t|
      t.string :key, null: false
      t.datetime :last_scale_up_at
      t.datetime :last_scale_down_at

      t.timestamps
    end

    add_index :solid_queue_autoscaler_state, :key, unique: true
  end
end
